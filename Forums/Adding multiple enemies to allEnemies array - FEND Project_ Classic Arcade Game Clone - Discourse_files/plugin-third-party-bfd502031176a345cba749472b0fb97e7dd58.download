define("discourse/plugins/discourse-narrative-bot/initializers/new-user-narrative",["exports","discourse/lib/plugin-api"],function(e,s){"use strict";function t(e){var s=e.container.lookup("message-bus:main"),t=e.getCurrentUser(),n=e.container.lookup("app-events:main");e.modifyClass("component:site-header",{didInsertElement:function(){this._super(),this.dispatch("header:search-context-trigger","header")}}),e.attachWidgetAction("header","headerSearchContextTrigger",function(){this.site.mobileView?this.state.skipSearchContext=!1:(this.state.contextEnabled=!0,this.state.searchContextType="topic")}),s&&t&&s.subscribe("/new_user_narrative/tutorial_search",function(){n.trigger("header:search-context-trigger")})}Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"new-user-narratve",initialize:function(e){e.lookup("site-settings:main").discourse_narrative_bot_enabled&&(0,s.withPluginApi)("0.8.7",t)}}}),define("discourse/plugins/discourse-presence/discourse/templates/connectors/topic-above-footer-buttons/presence",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={shouldRender:function(e,s){return s.siteSettings.presence_enabled}}}),Ember.TEMPLATES["javascripts/connectors/topic-above-footer-buttons/presence"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[1,[33,["topic-presence-display"],null,[["topicId"],[[28,["model","id"]]]]],false],[0,"\\n"]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/connectors/topic-above-footer-buttons/presence"}}),define("discourse/plugins/discourse-presence/discourse/templates/connectors/composer-fields/presence",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={shouldRender:function(e,s){return s.siteSettings.presence_enabled}}}),Ember.TEMPLATES["javascripts/connectors/composer-fields/presence"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[1,[33,["composer-presence-display"],null,[["action","post","topic","reply","title"],[[28,["model","action"]],[28,["model","post"]],[28,["model","topic"]],[28,["model","reply"]],[28,["model","title"]]]]],false],[0,"\\n"]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/connectors/composer-fields/presence"}}),Ember.TEMPLATES["javascripts/components/composer-presence-display"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[6,["if"],[[28,["shouldDisplay"]]],null,{"statements":[[0,"  "],[11,"div",[]],[15,"class","presence-users"],[13],[0,"\\n    "],[11,"div",[]],[15,"class","presence-avatars"],[13],[0,"\\n"],[6,["each"],[[28,["users"]]],null,{"statements":[[0,"        "],[1,[33,["avatar"],[[28,["user"]]],[["avatarTemplatePath","usernamePath","imageSize"],["avatar_template","username","small"]]],false],[0,"\\n"]],"locals":["user"]},null],[0,"    "],[14],[0,"\\n    "],[11,"span",[]],[15,"class","presence-text"],[13],[0,"\\n      "],[11,"span",[]],[15,"class","description"],[13],[0,"\\n"],[6,["if"],[[28,["isReply"]]],null,{"statements":[[1,[33,["i18n"],["presence.replying"],null],false]],"locals":[]},{"statements":[[1,[33,["i18n"],["presence.editing"],null],false]],"locals":[]}],[14],[14],[11,"span",[]],[15,"class","wave"],[13],[11,"span",[]],[15,"class","dot"],[13],[0,"."],[14],[11,"span",[]],[15,"class","dot"],[13],[0,"."],[14],[11,"span",[]],[15,"class","dot"],[13],[0,"."],[14],[0,"\\n    "],[14],[0,"\\n  "],[14],[0,"\\n"]],"locals":[]},null]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/components/composer-presence-display"}}),Ember.TEMPLATES["javascripts/components/topic-presence-display"]=Ember.HTMLBars.template({id:null,block:'{"statements":[[6,["if"],[[28,["shouldDisplay"]]],null,{"statements":[[0,"  "],[11,"div",[]],[15,"class","presence-users"],[13],[0,"\\n    "],[11,"div",[]],[15,"class","presence-avatars"],[13],[0,"\\n"],[6,["each"],[[28,["users"]]],null,{"statements":[[0,"        "],[1,[33,["avatar"],[[28,["user"]]],[["avatarTemplatePath","usernamePath","imageSize"],["avatar_template","username","small"]]],false],[0,"\\n"]],"locals":["user"]},null],[0,"    "],[14],[0,"\\n    "],[11,"span",[]],[15,"class","presence-text"],[13],[0,"\\n      "],[11,"span",[]],[15,"class","description"],[13],[1,[33,["i18n"],["presence.replying_to_topic"],[["count"],[[28,["users","length"]]]]],false],[14],[11,"span",[]],[15,"class","wave"],[13],[11,"span",[]],[15,"class","dot"],[13],[0,"."],[14],[11,"span",[]],[15,"class","dot"],[13],[0,"."],[14],[11,"span",[]],[15,"class","dot"],[13],[0,"."],[14],[14],[0,"\\n    "],[14],[0,"\\n  "],[14],[0,"\\n"]],"locals":[]},null]],"locals":[],"named":[],"yields":[],"hasPartials":false}',meta:{moduleName:"javascripts/components/topic-presence-display"}}),define("discourse/plugins/discourse-presence/discourse/components/composer-presence-display",["exports","discourse/lib/ajax","ember-addons/ember-computed-decorators"],function(e,s,t){"use strict";function n(e,s,t,n,r){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=t.slice().reverse().reduce(function(t,n){return n(e,s,t)||t},i),r&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(r):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,s,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0}),e.bufferTime=e.keepAliveDuration=void 0;var r,i,a,c,o,l,u,p=e.keepAliveDuration=1e4,d=e.bufferTime=3e3;e.default=Ember.Component.extend((r=(0,t.on)("didInsertElement"),i=(0,t.observes)("action","post.id","topic.id"),a=(0,t.observes)("reply","title"),c=(0,t.on)("willDestroyElement"),o=(0,t.observes)("currentState"),l=(0,t.default)("presenceUsers","currentUser.id"),u={composer:Ember.inject.controller(),action:null,post:null,topic:null,reply:null,title:null,previousState:null,currentState:null,presenceUsers:null,channel:null,composerOpened:function(){this._lastPublish=new Date,Ember.run.once(this,"updateState")},composerStateChanged:function(){Ember.run.once(this,"updateState")},typing:function(){new Date-this._lastPublish>p&&this.publish({current:this.get("currentState")})},composerClosing:function(){this.publish({previous:this.get("currentState")}),Ember.run.cancel(this._pingTimer),Ember.run.cancel(this._clearTimer)},updateState:function(){var e=null,s=this.get("action");"reply"!==s&&"edit"!==s||(e={action:s},"reply"===s&&(e.topic_id=this.get("topic.id")),"edit"===s&&(e.post_id=this.get("post.id"))),this.set("previousState",this.get("currentState")),this.set("currentState",e)},currentStateChanged:function(){var e=this;this.get("channel")&&(this.messageBus.unsubscribe(this.get("channel")),this.set("channel",null)),this.clear(),["reply","edit"].includes(this.get("action"))&&this.publish({response_needed:!0,previous:this.get("previousState"),current:this.get("currentState")}).then(function(s){e.get("isDestroyed")||(e.set("presenceUsers",s.users),e.set("channel",s.messagebus_channel),e.messageBus.subscribe(s.messagebus_channel,function(s){e.get("isDestroyed")||e.set("presenceUsers",s.users),e._clearTimer=Ember.run.debounce(e,"clear",p+d)},s.messagebus_id))})},clear:function(){this.get("isDestroyed")||this.set("presenceUsers",[])},publish:function(e){return this._lastPublish=new Date,(0,s.ajax)("/presence/publish",{type:"POST",data:e})},users:function(e,s){return(e||[]).filter(function(e){return e.id!==s})},isReply:Ember.computed.equal("action","reply"),shouldDisplay:Ember.computed.gt("users.length",0)},n(u,"composerOpened",[r],Object.getOwnPropertyDescriptor(u,"composerOpened"),u),n(u,"composerStateChanged",[i],Object.getOwnPropertyDescriptor(u,"composerStateChanged"),u),n(u,"typing",[a],Object.getOwnPropertyDescriptor(u,"typing"),u),n(u,"composerClosing",[c],Object.getOwnPropertyDescriptor(u,"composerClosing"),u),n(u,"currentStateChanged",[o],Object.getOwnPropertyDescriptor(u,"currentStateChanged"),u),n(u,"users",[l],Object.getOwnPropertyDescriptor(u,"users"),u),u))}),define("discourse/plugins/discourse-presence/discourse/components/topic-presence-display",["exports","ember-addons/ember-computed-decorators","discourse/plugins/discourse-presence/discourse/components/composer-presence-display"],function(e,s,t){"use strict";function n(e,s,t,n,r){var i={};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=t.slice().reverse().reduce(function(t,n){return n(e,s,t)||t},i),r&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(r):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,s,i),i=null),i}Object.defineProperty(e,"__esModule",{value:!0});var r,i,a,c,o;e.default=Ember.Component.extend((r=(0,s.on)("didInsertElement"),i=(0,s.on)("willDestroyElement"),a=(0,s.default)("topicId"),c=(0,s.default)("presenceUsers","currentUser.id"),o={topicId:null,presenceUsers:null,clear:function(){this.get("isDestroyed")||this.set("presenceUsers",[])},_inserted:function(){var e=this;this.clear(),this.messageBus.subscribe(this.get("channel"),function(s){e.get("isDestroyed")||e.set("presenceUsers",s.users),e._clearTimer=Ember.run.debounce(e,"clear",t.keepAliveDuration+t.bufferTime)},-2)},_destroyed:function(){Ember.run.cancel(this._clearTimer),this.messageBus.unsubscribe(this.get("channel"))},channel:function(e){return"/presence/topic/"+e},users:function(e,s){return(e||[]).filter(function(e){return e.id!==s})},shouldDisplay:Ember.computed.gt("users.length",0)},n(o,"_inserted",[r],Object.getOwnPropertyDescriptor(o,"_inserted"),o),n(o,"_destroyed",[i],Object.getOwnPropertyDescriptor(o,"_destroyed"),o),n(o,"channel",[a],Object.getOwnPropertyDescriptor(o,"channel"),o),n(o,"users",[c],Object.getOwnPropertyDescriptor(o,"users"),o),o))});
//# sourceMappingURL=https://discourse-cdn-sjc3.com/udacity/assets/plugin-third-party-bfd502031176a345cba749472b0fb97e7dd585329cb0459ddf11b2740877742a.js.map